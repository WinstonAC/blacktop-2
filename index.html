<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BLACKTOP BASKETBALL REGISTRATION FORM - v2.1</title>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #000;
            background-color: #f5f5f5;
            padding: 10px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 30px 20px;
            background: #f8f9fa;
            border-bottom: 2px solid #007bff;
        }

        .header h1 {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #000;
        }

        /* Form Section Styles */
        .form-section {
            padding: 25px;
            border-bottom: 1px solid #ddd;
        }

        .form-section:last-child {
            border-bottom: none;
        }

        .section-header {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #000;
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
        }

        .required {
            color: #dc3545;
            font-weight: bold;
        }

        /* Form Grid Layout */
        .form-grid {
            display: grid;
            gap: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            margin-bottom: 5px;
            color: #000;
            font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 10px 12px;
            border: 2px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease;
            background: white;
            width: 100%;
        }

        /* Fix select dropdown arrow positioning */
        .form-group select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
            padding-right: 40px;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #007bff;
        }

        .form-group input:invalid:not(:placeholder-shown) {
            border-color: #dc3545;
        }

        /* Date input specific styling */
        input[type="date"] {
            color-scheme: light;
        }

        input[type="date"]:invalid {
            border-color: #ddd;
        }

        input[type="date"]:focus:invalid {
            border-color: #007bff;
        }

        /* Radio Button Styles */
        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 5px;
            flex-wrap: wrap;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .radio-item input[type="radio"] {
            width: 18px;
            height: 18px;
        }

        .radio-item label {
            margin-bottom: 0;
            font-weight: normal;
            cursor: pointer;
        }

        /* Grid Layouts */
        .two-column {
            grid-template-columns: 1fr 1fr;
        }

        .three-column {
            grid-template-columns: 1fr 1fr 1fr;
        }

        .four-column {
            grid-template-columns: 1fr 1fr 1fr 1fr;
        }

        /* Address Layout */
        .address-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 15px;
        }

        /* Jersey/Shorts Side by Side */
        .jersey-shorts-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        /* Player Type Options */
        .player-type-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 10px;
        }

        .player-type-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: #f8f9fa;
        }

        .player-type-option input[type="radio"] {
            width: 16px;
            height: 16px;
        }

        .player-type-option label {
            font-weight: normal;
            cursor: pointer;
            flex: 1;
        }

        /* Conditional Fields */
        .conditional-fields {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 4px;
            border: 1px solid #ddd;
        }

        .conditional-fields h4 {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #000;
        }

        .inline-fields {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }

        /* Waiver Section */
        .waiver-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }

        .waiver-section h4 {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #000;
        }

        .waiver-section p {
            margin-bottom: 15px;
            font-size: 13px;
            line-height: 1.5;
            color: #333;
        }

        /* Electronic Signature Notice */
        .electronic-signature-notice {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            border: 1px solid #ddd;
            margin-bottom: 20px;
        }

        .electronic-signature-notice h4 {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #000;
        }

        .electronic-signature-notice p {
            font-size: 13px;
            line-height: 1.5;
            color: #333;
            margin-bottom: 0;
        }

        .checkbox-item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }

        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-top: 2px;
        }

        .checkbox-item label {
            font-weight: normal;
            cursor: pointer;
            margin-bottom: 0;
        }

        /* Submit Button */
        .submit-section {
            text-align: center;
            padding: 30px;
            background: #f8f9fa;
        }

        .submit-btn {
            background: #007bff;
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .submit-btn:hover {
            background: #0056b3;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-top: 1px solid #ddd;
            font-size: 12px;
            color: #666;
        }

        .refund-policy {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .refund-policy p {
            margin: 0;
            font-size: 14px;
            text-align: center;
            font-weight: bold;
            font-style: italic;
        }

        /* Error States */
        .error {
            border-color: #dc3545 !important;
        }

        .error-message {
            color: #dc3545;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .form-group.error .error-message {
            display: block;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .two-column,
            .three-column,
            .four-column,
            .address-row,
            .jersey-shorts-row,
            .inline-fields {
                grid-template-columns: 1fr;
            }
            
            .radio-group {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .container {
                margin: 0;
                border-radius: 0;
            }
            
            .form-section {
                padding: 20px;
            }
            
            /* Fix section title alignment - align with input fields */
            .section-header {
                margin-left: 0 !important;
                padding-left: 0 !important;
            }
            
            /* Fix date input right edge - add right margin only */
            input[type="date"] {
                margin-right: 20px !important;
                margin-left: 0 !important;
            }
            
            /* Force container padding for mobile */
            .container {
                padding: 0 15px !important;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 18px;
            }
            
            .form-section {
                padding: 25px 20px;
            }
            
            .form-group input,
            .form-group select,
            .form-group textarea {
                font-size: 16px; /* Prevents zoom on iOS */
                margin: 0 10px;
            }
        }

        /* Print Styles */
        @media print {
            * {
                -webkit-print-color-adjust: exact !important;
                color-adjust: exact !important;
            }
            
            body {
                background: white !important;
                padding: 0 !important;
                margin: 0 !important;
                font-size: 11px !important;
                line-height: 1.3 !important;
                font-family: Arial, sans-serif !important;
            }
            
            .container {
                box-shadow: none !important;
                border-radius: 0 !important;
                max-width: none !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            
            .header {
                background: white !important;
                border-bottom: 2px solid black !important;
                padding: 15px !important;
                margin-bottom: 10px !important;
                text-align: center !important;
            }
            
            .header h1 {
                font-size: 16px !important;
                margin-bottom: 0 !important;
                font-weight: bold !important;
            }
            
            .submit-section {
                display: none !important;
            }
            
            .form-section {
                border: 1px solid black !important;
                margin-bottom: 10px !important;
                page-break-inside: avoid !important;
                padding: 12px !important;
                background: white !important;
            }
            
            .section-header {
                font-size: 12px !important;
                border-bottom: 1px solid black !important;
                margin-bottom: 8px !important;
                padding-bottom: 3px !important;
                font-weight: bold !important;
            }
            
            .form-group {
                margin-bottom: 6px !important;
            }
            
            .form-group input,
            .form-group select,
            .form-group textarea {
                border: 1px solid black !important;
                background: white !important;
                padding: 4px !important;
                font-size: 10px !important;
                margin-bottom: 2px !important;
                width: 100% !important;
            }
            
            .form-group select {
                background-image: none !important;
                padding-right: 4px !important;
            }
            
            .form-group label {
                font-size: 10px !important;
                margin-bottom: 2px !important;
                font-weight: bold !important;
            }
            
            .required {
                color: black !important;
                font-weight: bold !important;
            }
            
            .radio-group {
                display: block !important;
            }
            
            .radio-item {
                margin-bottom: 4px !important;
                font-size: 10px !important;
            }
            
            .player-type-options {
                margin-bottom: 10px !important;
            }
            
            .player-type-option {
                padding: 6px !important;
                margin-bottom: 4px !important;
                font-size: 10px !important;
                border: 1px solid #ccc !important;
            }
            
            .jersey-shorts-row {
                margin-bottom: 10px !important;
                display: grid !important;
                grid-template-columns: 1fr 1fr !important;
                gap: 15px !important;
            }
            
            .waiver-section {
                background: white !important;
                border: 1px solid black !important;
                padding: 10px !important;
            }
            
            .waiver-section h4 {
                font-size: 10px !important;
                margin-bottom: 6px !important;
                font-weight: bold !important;
            }
            
            .waiver-section p {
                font-size: 9px !important;
                margin-bottom: 6px !important;
                line-height: 1.2 !important;
            }
            
            .electronic-signature-notice {
                padding: 10px !important;
                margin-bottom: 10px !important;
                border: 1px solid black !important;
            }
            
            .electronic-signature-notice h4 {
                font-size: 10px !important;
                margin-bottom: 4px !important;
                font-weight: bold !important;
            }
            
            .electronic-signature-notice p {
                font-size: 9px !important;
                margin-bottom: 6px !important;
                line-height: 1.2 !important;
            }
            
            .checkbox-item {
                font-size: 10px !important;
            }
            
            .footer {
                background: white !important;
                border-top: 1px solid black !important;
                font-size: 9px !important;
                padding: 8px !important;
            }
            
            .refund-policy {
                margin-top: 8px !important;
                padding: 8px !important;
                border: 1px solid black !important;
            }
            
            .refund-policy p {
                font-size: 9px !important;
                margin: 0 !important;
                font-weight: bold !important;
                text-align: center !important;
            }
            
            .conditional-fields {
                padding: 8px !important;
                margin-top: 8px !important;
                border: 1px solid #ccc !important;
            }
            
            .conditional-fields h4 {
                font-size: 10px !important;
                margin-bottom: 4px !important;
                font-weight: bold !important;
            }
            
            .inline-fields {
                gap: 10px !important;
                display: grid !important;
                grid-template-columns: 1fr 1fr 1fr !important;
            }
            
            .address-row {
                gap: 10px !important;
                display: grid !important;
                grid-template-columns: 2fr 1fr 1fr !important;
            }
            
            .two-column {
                grid-template-columns: 1fr 1fr !important;
                gap: 10px !important;
            }
            
            .form-row {
                display: grid !important;
                gap: 10px !important;
            }
            
            .form-grid {
                display: block !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>BLACKTOP BASKETBALL REGISTRATION FORM</h1>
        </div>

        <form id="regForm">
            <!-- Player Information Section -->
            <div class="form-section">
                <h2 class="section-header">Player Information</h2>
                <div class="form-grid">
                    <div class="form-row two-column">
                        <div class="form-group">
                            <label for="firstName">First Name <span class="required">*</span></label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name <span class="required">*</span></label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>
                    </div>
                    
                    <div class="form-row two-column">
                        <div class="form-group">
                            <label for="dateOfBirth">Date of Birth <span class="required">*</span></label>
                            <input type="date" id="dateOfBirth" name="dateOfBirth" required style="color-scheme: light;">
                        </div>
                        <div class="form-group">
                            <label for="age">Age <span class="required">*</span></label>
                            <input type="number" id="age" name="age" required min="4" max="18" style="max-width: 100px;">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Address <span class="required">*</span></label>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="addressLine1">Address Line 1 (Street)</label>
                                <input type="text" id="addressLine1" name="addressLine1" required>
                            </div>
                            <div class="form-group">
                                <label for="addressLine2">Address Line 2 (Apt/Unit)</label>
                                <input type="text" id="addressLine2" name="addressLine2">
                            </div>
                        </div>
                        <div class="address-row">
                            <div class="form-group">
                                <label for="city">City</label>
                                <input type="text" id="city" name="city" required>
                            </div>
                            <div class="form-group">
                                <label for="state">State</label>
                                <input type="text" id="state" name="state" required maxlength="2" placeholder="FL">
                            </div>
                            <div class="form-group">
                                <label for="zip">Zip</label>
                                <input type="text" id="zip" name="zip" required maxlength="5" placeholder="32207">
                            </div>
                        </div>
                    </div>

                    <div class="form-row two-column">
                        <div class="form-group">
                            <label for="phone">Phone Number <span class="required">*</span></label>
                            <input type="tel" id="phone" name="phone" required placeholder="(555) 123-4567">
                        </div>
                        <div class="form-group">
                            <label for="altPhone">Alternative Phone Number</label>
                            <input type="tel" id="altPhone" name="altPhone" placeholder="(555) 123-4567">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Division Selection -->
            <div class="form-section">
                <h2 class="section-header">Division Selection</h2>
                <div class="form-group">
                    <label>Select Division <span class="required">*</span></label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="biddy" name="division" value="Biddy (4-7)">
                            <label for="biddy">Biddy (4–7)</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="junior" name="division" value="Junior (8-11)">
                            <label for="junior">Junior (8–11)</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="older" name="division" value="Older (12-14)">
                            <label for="older">Older (12–14)</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Player Type, Fees, Uniform & Payment Section -->
            <div class="form-section">
                <h2 class="section-header">Player Type, Fees, Uniform & Payment</h2>
                
                <!-- Player Type & Fees -->
                <div class="form-group">
                    <label>Select Player Type <span class="required">*</span></label>
                    <div class="player-type-options">
                        <div class="player-type-option">
                            <input type="radio" id="new-player" name="playerType" value="New Player — $135">
                            <label for="new-player">NEW PLAYER: $135</label>
                        </div>
                        <div class="player-type-option">
                            <input type="radio" id="returning-without-uniform" name="playerType" value="Returning Player (without uniform) — $135">
                            <label for="returning-without-uniform">RETURNING PLAYER W/O UNIFORM: $135</label>
                        </div>
                        <div class="player-type-option">
                            <input type="radio" id="returning-with-uniform" name="playerType" value="Returning Player (with uniform) — $105">
                            <label for="returning-with-uniform">RETURNING PLAYER WITH UNIFORM: $105</label>
                        </div>
                    </div>
                    <p style="margin-top: 10px; font-size: 13px; color: #666; font-style: italic;">(Player has uniform that fits and can be worn during games)</p>
                </div>

                <!-- Conditional Fields for Returning Players with Uniform -->
                <div id="returningUniformFields" class="conditional-fields" style="display: none;">
                    <h4>RETURNING PLAYER W/UNIFORM:</h4>
                    <div class="inline-fields">
                        <div class="form-group">
                            <label for="jerseyColor">JERSEY COLOR:</label>
                            <input type="text" id="jerseyColor" name="jerseyColor" placeholder="">
                        </div>
                        <div class="form-group">
                            <label for="jerseyNumber">NUMBER:</label>
                            <input type="text" id="jerseyNumber" name="jerseyNumber" placeholder="">
                        </div>
                        <div class="form-group">
                            <label for="team">TEAM:</label>
                            <input type="text" id="team" name="team" placeholder="">
                        </div>
                    </div>
                </div>

                <!-- Jersey & Shorts Sizing -->
                <div id="uniformSizingFields" class="jersey-shorts-row" style="margin-top: 20px;">
                    <div class="form-group">
                        <label for="jerseySize">JERSEY <span class="required">*</span></label>
                        <select id="jerseySize" name="jerseySize" required>
                            <option value="">Select Jersey Size</option>
                            <optgroup label="Youth">
                                <option value="Youth S (4-6)">Youth S (4–6)</option>
                                <option value="Youth M (8-10)">Youth M (8–10)</option>
                                <option value="Youth L (12-14)">Youth L (12–14)</option>
                            </optgroup>
                            <optgroup label="Adult">
                                <option value="Adult S (30-32)">Adult S (30–32)</option>
                                <option value="Adult M (34-36)">Adult M (34–36)</option>
                                <option value="Adult L (38-40)">Adult L (38–40)</option>
                                <option value="Adult XL (42-44)">Adult XL (42–44)</option>
                                <option value="Adult XXL (46-48)">Adult XXL (46–48)</option>
                            </optgroup>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="shortsSize">SHORTS <span class="required">*</span></label>
                        <select id="shortsSize" name="shortsSize" required>
                            <option value="">Select Shorts Size</option>
                            <optgroup label="Youth">
                                <option value="Youth S (4-6)">Youth S (4–6)</option>
                                <option value="Youth M (8-10)">Youth M (8–10)</option>
                                <option value="Youth L (12-14)">Youth L (12–14)</option>
                            </optgroup>
                            <optgroup label="Adult">
                                <option value="Adult S (30-32)">Adult S (30–32)</option>
                                <option value="Adult M (34-36)">Adult M (34–36)</option>
                                <option value="Adult L (38-40)">Adult L (38–40)</option>
                                <option value="Adult XL (42-44)">Adult XL (42–44)</option>
                                <option value="Adult XXL (46-48)">Adult XXL (46–48)</option>
                            </optgroup>
                        </select>
                    </div>
                </div>

                <!-- Payment Method -->
                <div style="margin-top: 20px;">
                    <div class="form-row two-column">
                        <div class="form-group">
                            <label>PAYS AT TABLE ONSITE: <span class="required">*</span></label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" id="cash-yes" name="cashPaid" value="Yes" required>
                                    <label for="cash-yes">Yes</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" id="cash-no" name="cashPaid" value="No" required>
                                    <label for="cash-no">No</label>
                                </div>
                            </div>
                            <div id="cashAmountField" class="form-group" style="display: none; margin-top: 10px;">
                                <label for="cashAmount">Amount Paid Onsite <span class="required">*</span></label>
                                <div style="display: flex; align-items: center;">
                                    <span style="margin-right: 5px; font-weight: bold;">$</span>
                                    <input type="number" id="cashAmount" name="cashAmount" step="0.01" min="0" placeholder="0.00" style="text-align: right; width: 100px;">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>PAYS W/CASH APP: <span class="required">*</span></label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" id="cashapp-yes" name="cashApp" value="Yes" required>
                                    <label for="cashapp-yes">Yes</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" id="cashapp-no" name="cashApp" value="No" required>
                                    <label for="cashapp-no">No</label>
                                </div>
                            </div>
                            <div id="cashAppAmountField" class="form-group" style="display: none; margin-top: 10px;">
                                <label for="cashAppAmount">Amount Paid via CashApp <span class="required">*</span></label>
                                <div style="display: flex; align-items: center;">
                                    <span style="margin-right: 5px; font-weight: bold;">$</span>
                                    <input type="number" id="cashAppAmount" name="cashAppAmount" step="0.01" min="0" placeholder="0.00" style="text-align: right; width: 100px;">
                                </div>
                            </div>
                            <p style="margin-top: 10px; font-size: 13px; color: #666;">CashApp: <strong>$BTLBB</strong></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Medical Information -->
            <div class="form-section">
                <h2 class="section-header">Medical Information</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Do you have any medical conditions we should know about? <span class="required">*</span></label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="medical-no" name="medicalConditions" value="No">
                                <label for="medical-no">No</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="medical-yes" name="medicalConditions" value="Yes">
                                <label for="medical-yes">Yes</label>
                            </div>
                        </div>
                    </div>
                    
                    <div id="medicalDescription" class="form-group" style="display: none;">
                        <label for="medicalDetails">If applicable, please describe any medical, learning, or emotional problem which might affect participation.</label>
                        <input type="text" id="medicalDetails" name="medicalDetails" placeholder="Please describe any medical conditions, learning disabilities, or emotional problems that might affect participation.">
                    </div>
                </div>
            </div>

            <!-- Waivers & Permissions Section -->
            <div class="form-section">
                <h2 class="section-header">Waivers & Permissions</h2>
                <div class="waiver-section">
                    <h4>WAIVER/LIABILITY FOR THE BLACKTOP MINISTRY BASKETBALL PROGRAM OF THE POTTER'S HOUSE INTERNATIONAL MINISTRIES CHURCH</h4>
                    <p>
                        I understand that this activity may subject me/my child to rigorous physical exertion and stress, and state that I/my child is in sufficient physical condition to accept this level of activity. I hereby consent to treatment, evacuation, anesthesia and/or operations, which might become necessary in the event of a medical emergency while I/my child is participating in this basketball program. I understand that health/accident insurance coverage is the responsibility of the participant or their parent/guardian. I understand and accept that playing basketball exposes my child to a number of risks. I have and do hereby release and forever discharge The Potter's House International Ministries Church (hereafter, "TPHIM"), the Blacktop Ministry Basketball Program and its agents, employees, directors, coaches and volunteers from any and all liability, actions, causes of action, claims and demands of any and all nature whatsoever which we now have or may ever had as a result of our participation in this program. I agree to indemnify and hold and save TPHIM and Blacktop Ministry Basketball Program harmless from any and all damages, loss or liability occurring by reason of any injury to any person or property caused by an act or omission, neglect or wrongdoing of TPHIM and Blacktop Ministry Basketball Program, myself or my child which may arise out of participation in this program. The TPHIM and Blacktop Ministry Basketball League youth basketball program is not a requirement and I/my child have freely chosen to participate. I hereby assume all risk of injury associated with this program. I give my permission to TPHIM and Blacktop Ministry Basketball Program to use my child's image or voice in basketball or church presentations for publicity. As a condition of participation in the Blacktop Ministry Basketball Program by my child or myself, I agree to 1) adhere to applicable rules, regulations, and policies prescribed by the Basketball Program and Church; and 2) exercise reasonable care and good judgment in such participation.
                    </p>
                    
                    <h4>Permission to Use Photograph</h4>
                    <p>
                        I give my permission to use my and/or my child's name, photographs, videos, quotations and likeness in any advertisements or promotions performed in connection with The Potter's House International Ministries Church and the Blacktop Ministry Basketball League events or other affiliated events, and agree that neither I nor my child shall be entitled to any compensation for such use. Prior to signing this document, I have had an adequate opportunity to read and understand it, have had an opportunity to ask questions about it, and any questions I had have been answered to my satisfaction. I understand that the Blacktop Basketball Program reserves the right to suspend the participation of any family which does not comply with its guidelines for registration and participate
                    </p>
                </div>
            </div>

            <!-- Parent/Guardian Signature Section -->
            <div class="form-section">
                <h2 class="section-header">Parent/Guardian Signature</h2>
                <div class="form-grid">
                    <div class="electronic-signature-notice">
                        <h4><strong>PLEASE READ THE FOLLOWING STATEMENT BEFORE SIGNING THIS FORM:</strong></h4>
                        <p><em>By checking the "YES" button, I am signing this document electronically. I agree that my electronic signature is the legal equivalent of my manual/handwritten signature on this document. By checking "YES" using any device, means, or action, I consent to the legally binding terms and conditions of this document. I further agree that my signature on this document is as valid as if I signed the document in writing. If I am signing this document on behalf of a minor, I represent and warrant that I am the minor's parent or legal guardian.</em></p>
                        
                        <div class="form-group" style="margin-top: 15px;">
                            <div class="checkbox-item">
                                <input type="checkbox" id="consent" name="consent" required>
                                <label for="consent">I agree and consent to the above terms and conditions <span class="required">*</span></label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="parentName">Parent/Guardian Full Name <span class="required">*</span></label>
                        <input type="text" id="parentName" name="parentName" required>
                    </div>
                    
                    <div class="form-row two-column">
                        <div class="form-group">
                            <label for="parentEmail">Parent/Guardian Email <span class="required">*</span></label>
                            <input type="email" id="parentEmail" name="parentEmail" required>
                        </div>
                        <div class="form-group">
                            <label for="signatureDate">Date <span class="required">*</span></label>
                            <input type="date" id="signatureDate" name="signatureDate" required>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="submit-section">
                <button type="submit" class="submit-btn">Submit Registration</button>
            </div>
        </form>

        <!-- Footer -->
        <div class="footer">
            <div class="refund-policy">
                <p><em>NO REFUNDS WILL BE GIVEN ONCE THE FIRST GAME HAS BEEN PLAYED IN THE PLAYER'S DIVISION.</em></p>
            </div>
        </div>
    </div>

    <script>

        // Form functionality
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('regForm');
            console.log('Form element found:', form);
            const returningUniformFields = document.getElementById('returningUniformFields');
            const medicalDescription = document.getElementById('medicalDescription');
            
            // Show/hide conditional fields for returning players with uniform
            const playerTypeRadios = document.querySelectorAll('input[name="playerType"]');
            const uniformSizingFields = document.getElementById('uniformSizingFields');
            const jerseySizeSelect = document.getElementById('jerseySize');
            const shortsSizeSelect = document.getElementById('shortsSize');
            
            playerTypeRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'Returning Player (with uniform) — $105') {
                        returningUniformFields.style.display = 'block';
                        // Hide uniform sizing for returning players with uniform
                        uniformSizingFields.style.display = 'none';
                        // Remove required attribute and clear values
                        jerseySizeSelect.removeAttribute('required');
                        shortsSizeSelect.removeAttribute('required');
                        jerseySizeSelect.value = '';
                        shortsSizeSelect.value = '';
                    } else {
                        returningUniformFields.style.display = 'none';
                        // Show uniform sizing for new players and returning without uniform
                        uniformSizingFields.style.display = 'block';
                        // Add required attribute back
                        jerseySizeSelect.setAttribute('required', 'required');
                        shortsSizeSelect.setAttribute('required', 'required');
                    }
                });
            });
            
            // Show/hide medical description
            const medicalRadios = document.querySelectorAll('input[name="medicalConditions"]');
            medicalRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'Yes') {
                        medicalDescription.style.display = 'block';
                    } else {
                        medicalDescription.style.display = 'none';
                    }
                });
            });
            
            // Payment method mutual exclusivity and amount fields
            const cashAmountField = document.getElementById('cashAmountField');
            const cashAppAmountField = document.getElementById('cashAppAmountField');
            const cashAmountInput = document.getElementById('cashAmount');
            const cashAppAmountInput = document.getElementById('cashAppAmount');
            
            
            // Cash paid radio buttons
            const cashRadios = document.querySelectorAll('input[name="cashPaid"]');
            cashRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'Yes') {
                        // Show cash amount field
                        if (cashAmountField) {
                            cashAmountField.style.display = 'block';
                        }
                        if (cashAmountInput) {
                            cashAmountInput.setAttribute('required', 'required');
                        }
                        
                        // Set cash app to No and hide its amount field
                        const cashAppNo = document.querySelector('input[name="cashApp"][value="No"]');
                        if (cashAppNo) {
                            cashAppNo.checked = true;
                        }
                        if (cashAppAmountField) {
                            cashAppAmountField.style.display = 'none';
                        }
                        if (cashAppAmountInput) {
                            cashAppAmountInput.removeAttribute('required');
                            cashAppAmountInput.value = '';
                        }
                    } else {
                        // Hide cash amount field
                        if (cashAmountField) {
                            cashAmountField.style.display = 'none';
                        }
                        if (cashAmountInput) {
                            cashAmountInput.removeAttribute('required');
                            cashAmountInput.value = '';
                        }
                    }
                });
            });
            
            // Cash app radio buttons
            const cashAppRadios = document.querySelectorAll('input[name="cashApp"]');
            cashAppRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'Yes') {
                        // Show cash app amount field
                        cashAppAmountField.style.display = 'block';
                        cashAppAmountInput.setAttribute('required', 'required');
                        
                        // Set cash paid to No and hide its amount field
                        document.querySelector('input[name="cashPaid"][value="No"]').checked = true;
                        cashAmountField.style.display = 'none';
                        cashAmountInput.removeAttribute('required');
                        cashAmountInput.value = '';
                    } else {
                        // Hide cash app amount field
                        cashAppAmountField.style.display = 'none';
                        cashAppAmountInput.removeAttribute('required');
                        cashAppAmountInput.value = '';
                    }
                });
            });
            
            // Auto-calculate age from date of birth
            const dateOfBirthInput = document.getElementById('dateOfBirth');
            const ageInput = document.getElementById('age');
            
            dateOfBirthInput.addEventListener('change', function() {
                if (this.value) {
                    const today = new Date();
                    const birthDate = new Date(this.value);
                    let age = today.getFullYear() - birthDate.getFullYear();
                    const monthDiff = today.getMonth() - birthDate.getMonth();
                    
                    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                        age--;
                    }
                    
                    ageInput.value = age;
                }
            });
            
            // Auto-format phone numbers
            const phoneInput = document.getElementById('phone');
            const altPhoneInput = document.getElementById('altPhone');
            
            function formatPhoneNumber(input) {
                let value = input.value.replace(/\D/g, ''); // Remove all non-digits
                
                if (value.length >= 6) {
                    value = `(${value.slice(0, 3)}) ${value.slice(3, 6)}-${value.slice(6, 10)}`;
                } else if (value.length >= 3) {
                    value = `(${value.slice(0, 3)}) ${value.slice(3)}`;
                } else if (value.length > 0) {
                    value = `(${value}`;
                }
                
                input.value = value;
            }
            
            phoneInput.addEventListener('input', function() {
                formatPhoneNumber(this);
            });
            
            altPhoneInput.addEventListener('input', function() {
                formatPhoneNumber(this);
            });
            
            // Form submission
            form.addEventListener('submit', function(e) {
                console.log('Form submission triggered!');
                e.preventDefault();
                e.stopPropagation();
                
                // Validate required fields
                const requiredFields = form.querySelectorAll('[required]');
                let isValid = true;
                
                requiredFields.forEach(field => {
                    if (!field.value) {
                        isValid = false;
                        field.classList.add('error');
                    } else {
                        field.classList.remove('error');
                    }
                });
                
                if (!isValid) {
                    console.log('Form validation failed - missing required fields');
                    return;
                }
                
                // Generate email content
                const formData = new FormData(form);
                const data = Object.fromEntries(formData.entries());
                
                // Get division and other radio button values
                const division = document.querySelector('input[name="division"]:checked')?.value || '';
                const cashPaid = document.querySelector('input[name="cashPaid"]:checked')?.value || '';
                const cashApp = document.querySelector('input[name="cashApp"]:checked')?.value || '';
                const medicalConditions = document.querySelector('input[name="medicalConditions"]:checked')?.value || '';
                const consent = document.querySelector('input[name="consent"]')?.checked ? 'Yes' : 'No';
                
                // Ensure all required data is captured
                data.division = division;
                data.cashPaid = cashPaid;
                data.cashApp = cashApp;
                data.medicalConditions = medicalConditions;
                data.consent = consent;
                
                // Format date
                const formatDate = (dateString) => {
                    if (!dateString) return '';
                    return new Date(dateString).toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit'
                    });
                };
                
                // Generate email body optimized for one-page letter size printing
                const emailBody = `BLACKTOP BASKETBALL REGISTRATION FORM
==========================================

DIVISION: ${data.division || ''}

PLAYER INFO:
Name: ${data.firstName || ''} ${data.lastName || ''}
DOB: ${formatDate(data.dateOfBirth)} | Age: ${data.age || ''}
Address: ${data.addressLine1 || ''}${data.addressLine2 ? ', ' + data.addressLine2 : ''}
City: ${data.city || ''}, ${data.state || ''} ${data.zip || ''}
Phone: ${data.phone || ''}${data.altPhone ? ' | Alt: ' + data.altPhone : ''}

UNIFORM:
Jersey: ${data.jerseySize || ''} | Shorts: ${data.shortsSize || ''}

PLAYER TYPE & FEES:
${data.playerType || ''}
${data.playerType === 'Returning Player (with uniform) — $105' ? `Uniform: ${data.jerseyColor || ''} #${data.jerseyNumber || ''} (${data.team || ''})` : ''}

PAYMENT:
${data.cashPaid === 'Yes' ? `Cash Onsite: $${data.cashAmount || '0.00'}` : 'Cash Onsite: No'}
${data.cashApp === 'Yes' ? `CashApp: $${data.cashAppAmount || '0.00'}` : 'CashApp: No'}

MEDICAL:
${data.medicalConditions || ''}${data.medicalConditions === 'Yes' ? ` - ${data.medicalDetails || ''}` : ''}


SIGNATURE:
Parent/Guardian: ${data.parentName || ''}
Email: ${data.parentEmail || ''}
Date: ${formatDate(data.signatureDate)}
Consent: ${data.consent || 'No'}

WAIVERS & PERMISSIONS:
I understand this activity involves physical exertion and consent to medical 
treatment if needed. I release The Potter's House International Ministries 
Church and Blacktop Ministry Basketball Program from liability. I give 
permission for my child's image/voice to be used in church/basketball 
presentations. I agree to follow all rules and policies.

REFUND POLICY:
NO REFUNDS AFTER FIRST GAME IN PLAYER'S DIVISION.

Submitted: ${new Date().toLocaleDateString('en-US', { 
    year: 'numeric', 
    month: 'short', 
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
})}
==========================================`;
                
                // Create mailto link with HTML formatting for better line breaks
                const subject = `Blacktop Basketball Registration - ${data.firstName} ${data.lastName}`;
                
                // Debug: Check if all data is present
                console.log('Form data for email:', data);
                console.log('Player type:', data.playerType);
                console.log('Payment data:', data.cashPaid, data.cashAmount, data.cashApp, data.cashAppAmount);
                console.log('Parent data:', data.parentName, data.parentEmail, data.consent);
                
                // Create HTML formatted email body for better line break preservation
                const htmlEmailBody = `<pre style="font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4;">
BLACKTOP BASKETBALL REGISTRATION FORM
==========================================

DIVISION: ${data.division || ''}

PLAYER INFO:
Name: ${data.firstName || ''} ${data.lastName || ''}
DOB: ${formatDate(data.dateOfBirth)} | Age: ${data.age || ''}
Address: ${data.addressLine1 || ''}${data.addressLine2 ? ', ' + data.addressLine2 : ''}
City: ${data.city || ''}, ${data.state || ''} ${data.zip || ''}
Phone: ${data.phone || ''}${data.altPhone ? ' | Alt: ' + data.altPhone : ''}

UNIFORM:
Jersey: ${data.jerseySize || ''} | Shorts: ${data.shortsSize || ''}

PLAYER TYPE & FEES:
${data.playerType || ''}
${data.playerType === 'Returning Player (with uniform) — $105' ? `Uniform: ${data.jerseyColor || ''} #${data.jerseyNumber || ''} (${data.team || ''})` : ''}

PAYMENT:
${data.cashPaid === 'Yes' ? `Cash Onsite: $${data.cashAmount || '0.00'}` : 'Cash Onsite: No'}
${data.cashApp === 'Yes' ? `CashApp: $${data.cashAppAmount || '0.00'}` : 'CashApp: No'}

MEDICAL:
${data.medicalConditions || ''}${data.medicalConditions === 'Yes' ? ` - ${data.medicalDetails || ''}` : ''}

SIGNATURE:
Parent/Guardian: ${data.parentName || ''}
Email: ${data.parentEmail || ''}
Date: ${formatDate(data.signatureDate)}
Consent: ${data.consent || 'No'}

WAIVERS & PERMISSIONS:
I understand this activity involves physical exertion and consent to medical 
treatment if needed. I release The Potter's House International Ministries 
Church and Blacktop Ministry Basketball Program from liability. I give 
permission for my child's image/voice to be used in church/basketball 
presentations. I agree to follow all rules and policies.

REFUND POLICY:
NO REFUNDS AFTER FIRST GAME IN PLAYER'S DIVISION.

Submitted: ${new Date().toLocaleDateString('en-US', { 
    year: 'numeric', 
    month: 'short', 
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
})}
==========================================
</pre>`;
                
                const mailtoLink = `mailto:robertjanice@bellsouth.net?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(htmlEmailBody)}`;
                
                // Open email client - simple approach like before
                try {
                    window.location.href = mailtoLink;
                } catch (error) {
                    console.error('Error opening email:', error);
                }
                
                // Always copy to clipboard as backup
                navigator.clipboard.writeText(emailBody).then(() => {
                    console.log('Registration form copied to clipboard');
                }).catch(err => {
                    console.log('Could not copy to clipboard:', err);
                });
                
                // Send data to Google Sheets with proper error handling
                // Use the new Google Apps Script with payment amount fields
                const SHEET_ENDPOINT = 'https://script.google.com/macros/s/AKfycbzJCEqmN_FdI-9IDADD6zMexrwp8xVWAqnhJWRffzxUWrGGOTRQ0LwRYiRjnGrFkYy5Vg/exec';
                
                // Add division to data
                data.division = division;
                
                
                // Convert to URL-encoded format for Google Sheets
                // Use FormData instead of URLSearchParams for better compatibility
                const sheetFormData = new FormData();
                Object.keys(data).forEach(key => {
                    if (data[key] !== null && data[key] !== undefined) {
                        sheetFormData.append(key, data[key]);
                    }
                });
                
                // Also try URLSearchParams as backup
                const params = new URLSearchParams();
                Object.keys(data).forEach(key => {
                    if (data[key] !== null && data[key] !== undefined) {
                        params.append(key, data[key]);
                    }
                });
                
                
                // Try GET method first (most reliable for Google Apps Script)
                const getUrl = `${SHEET_ENDPOINT}?${params.toString()}`;
                
                fetch(getUrl, {
                    method: 'GET',
                    mode: 'no-cors'
                }).then(() => {
                    console.log('Registration submitted successfully! Check your email for confirmation.');
                }).catch(err => {
                    // Fallback: Try POST with FormData
                fetch(SHEET_ENDPOINT, {
                    method: 'POST',
                    mode: 'no-cors',
                        body: sheetFormData
                }).then(() => {
                        console.log('Registration submitted to Google Sheets successfully!');
                    }).catch(err2 => {
                        console.log('Google Sheets submission failed, but email was sent');
                    });
                });
                
                return false; // Prevent form submission
            });
        });
    </script>
</body>
</html>